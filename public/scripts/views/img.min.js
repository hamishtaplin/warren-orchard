window.App=window.App||{},App.Views=App.Views||{},App.Views.ImageView=Backbone.View.extend({initialize:function(t){_.bindAll(this,"onImgLoad","load"),this.useBg=t.useBg,this.imgEl=this.el.querySelector(".img"),this.load()},load:function(){var t=this.imgEl.getAttribute("data-src"),i=new Image;i.onload=_.bind(this.onImgLoad,this),i.setAttribute("src",t)},onImgLoad:function(t){var i=t.target;i.naturalWidth<i.naturalHeight&&this.el.classList.add("portrait"),this.useBg?this.imgEl.style.backgroundImage="url("+i.getAttribute("src")+")":this.imgEl.setAttribute("src",i.getAttribute("src")),this.imgEl.removeAttribute("data-src"),this.el.classList.add("is-loaded"),this.trigger("load",this)},convertImageToDataURI:function(t){var i=document.createElement("canvas");i.width=t.width,i.height=t.height;var e=i.getContext("2d");return e.drawImage(t,0,0),i.toDataURL("image/png")}});