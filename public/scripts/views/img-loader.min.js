window.App=window.App||{},App.Views=App.Views||{},App.Views.ImageLoader=Backbone.View.extend({initialize:function(e){var s=e.imgs;this.numImages=s.length,this.queue=[],this.numLoaded=0;for(var i=0;i<this.numImages;i++){var t=new App.Views.ImageView({el:s[i],id:i,useBg:e.useBg});t.once("load",this.onImageLoaded,this),this.queue.push(t)}},onImageLoaded:function(e){this.numLoaded++,e.el.classList.add("img-"+this.numLoaded),this.numLoaded===this.numImages?(App.eventDispatcher.trigger("progress:complete"),this.trigger("progress:complete")):(App.eventDispatcher.trigger("progress:change",this.numLoaded/this.numImages*100),this.trigger("progress:change",this.numLoaded/this.numImages*100))}});