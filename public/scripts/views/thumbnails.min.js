App.Views.Thumbnails=Backbone.View.extend({MAX_COLS:5,MAX_ROWS:3,MAX_THUMB_SIZE:400,el:"#thumbs",initialize:function(){var e=document.querySelectorAll(".thumb");this.numThumbs=e.length,this.progress=new App.Views.ProgressBar({total:this.numThumbs}),this.queue=[],this.numLoaded=0;for(var i=0;i<this.numThumbs;i++){var t=new App.Views.Thumbnail({el:e[i],id:i});t.once("load",this.onThumbLoaded,this),this.queue.push(t)}parseFloat(window.getComputedStyle(document.body,null).getPropertyValue("font-size"));this.headerHeight=document.getElementById("header").offsetHeight,this.grid=new App.Views.Grid({thumbs:this.queue}),window.addEventListener("resize",_.bind(this.onWindowResize,this)),this.grid.draw()},onThumbLoaded:function(){this.numLoaded++,this.numLoaded===this.numThumbs?this.progress.complete():this.progress.render(this.numLoaded)},onWindowResize:function(){this.grid.draw()}});