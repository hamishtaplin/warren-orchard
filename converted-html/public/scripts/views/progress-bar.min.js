window.App=window.App||{},App.Views=App.Views||{},App.Views.ProgressBar=Backbone.View.extend({el:document.getElementById("progress"),initialize:function(){_.bindAll(this,"update","complete","onTransitionEnd"),this.render(),App.eventDispatcher.on("progress:change",this.update),App.eventDispatcher.on("progress:complete",this.complete)},render:function(){var e=document.getElementById("global-wrapper");e.insertBefore(this.el,e.firstChild),this.innerEl=document.createElement("div"),this.el.classList.add("progress"),this.innerEl.classList.add("progress-bar"),this.el.appendChild(this.innerEl)},update:function(e){this.el.classList.remove("is-complete"),this.innerEl.style.width=e.toString()+"%"},complete:function(){this.update(100);window.setTimeout(_.bind(function(){this.el.addEventListener("webkitTransitionEnd",this.onTransitionEnd),this.el.classList.add("is-complete")},this),500)},onTransitionEnd:function(){this.el.removeEventListener("webkitTransitionEnd",this.onTransitionEnd),this.innerEl.style.width="10%"}});