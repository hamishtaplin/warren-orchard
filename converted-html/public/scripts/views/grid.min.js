App.Views.Grid=Backbone.Views.extend({el:"#thumbs",initialize:function(t){this.numPagesOfThumbs=0,this.thumbPages=[],this.thumbsInnerEl=document.createElement("div"),this.thumbsInnerEl.className="thumbs__inner",this.el.appendChild(this.thumbsInnerEl),this.thumbsPagingNav=document.createElement("nav"),this.thumbsPagingNav.className="thumbs__paging",this.el.parentElement.appendChild(this.thumbsPagingNav),thumbs=t.thumbs},draw:function(){var t=window.innerWidth,e=window.innerHeight-2*this.headerHeight,s=parseInt(this.getStyleProp(this.queue[0].el,"max-width")),h=this.el.style,i=0,n=0,l=0,u=0,a=0;if(cols=Math.ceil(t/s),rows=Math.ceil(e/s),cols>this.MAX_COLS&&(cols=this.MAX_COLS),rows>this.MAX_ROWS&&(rows=this.MAX_ROWS),i=cols*rows,n=Math.ceil(numThumbs/i),n!==this.numPagesOfThumbs){for(this.numPagesOfThumbs=n,a=0;n>a;a++)if("undefined"==typeof this.thumbPages[a]){var m=document.createElement("div");m.id="thumbs-page-"+a,m.className="thumbs__page",this.thumbPages[a]=m,this.thumbsInnerEl.appendChild(m)}for(a=0;numThumbs>a;a++){var r=thumbs[a].el;r.style.width=100/cols+"%",r.style.height=100/rows+"%",this.thumbPages[Math.floor(a/i)].appendChild(r)}}for(l=e/rows*cols,u=e,h.width=l+"px",h.height=u+"px",a=0;n>a;a++)this.thumbPages[a].style.width=l+"px",this.thumbPages[a].style.height=u+"px";this.thumbsInnerEl.style.width=l*n+"px",this.thumbsInnerEl.style.height=u+"px"},getStyleProp:function(t,e){return window.getComputedStyle?window.getComputedStyle(t,null).getPropertyValue(e):t.currentStyle?t.currentStyle[e]:void 0}});