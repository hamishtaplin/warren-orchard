(function(e){e.App=e.App||{},App.Views=App.Views||{},App.Views.ProjectView=Backbone.View.extend({initialize:function(){_.bindAll(this,"onProjectImgsLoaded"),this.el.setAttribute("class","project-view-item"),this.el.setAttribute("id",this.id),this.loaded=!1},load:function(e){this.imgLoader=new App.Views.ImageLoader({imgs:this.el.querySelectorAll(".gallery-item"),useBg:!0}),this.imgLoader.on("progress:complete",_.bind(function(){this.onProjectImgsLoaded(e)},this))},onProjectImgsLoaded:function(e){_.isUndefined(this.slider)?this.slider=new App.Views.Slider({animType:"fade",el:this.el.querySelector(".gallery"),innerEl:this.el.querySelector(".gallery-inner")}):this.navigateTo(e),this.loaded=!0,this.trigger("loaded")},navigateTo:function(e){this.slider.navigateTo(e)},getNext:function(){return this.slider.index+1<this.slider.length?this.slider.index+1:!1},getPrev:function(){return this.slider.index>0?this.slider.index-1:!1},getLength:function(){return this.slider.length}})}).call(this,window,Zepto);